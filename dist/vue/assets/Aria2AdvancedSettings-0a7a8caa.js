import{d as B,x as P,r as b,a as H,L as M,E as m,g as D,l as i,y as E,f as N,k as t,e as d,B as R,o as V,m as l,u as y,p as h,i as q}from"./index-aa3933e3.js";const F={class:"advanced-settings"},G=B({__name:"Aria2AdvancedSettings",setup(O){const r=P(),A=b(),p=b(!1),f=b(!1),o=H({diskCache:16,fileAllocation:"prealloc",checkIntegrity:!1,realtimeChunkChecksum:!0,logLevel:"warn",log:"",consoleLogLevel:"notice",checksumAlgorithm:"sha-1",eventPoll:"epoll",checksumCheck:!0});M(()=>{r.isConnected&&C()});async function C(){if(!r.isConnected){m.warning("请先连接到 Aria2 服务器");return}p.value=!0;try{const s=await r.getGlobalOptions();s&&(o.diskCache=parseInt(s["disk-cache"]||"16"),o.fileAllocation=s["file-allocation"]||"prealloc",o.checkIntegrity=s["check-integrity"]==="true",o.realtimeChunkChecksum=s["realtime-chunk-checksum"]!=="false",o.logLevel=s["log-level"]||"warn",o.log=s.log||"",o.consoleLogLevel=s["console-log-level"]||"notice",o.checksumAlgorithm=s.checksum||"sha-1",o.eventPoll=s["event-poll"]||"epoll",o.checksumCheck=s["checksum-check"]!=="false"),m.success("设置加载成功")}catch(s){m.error("加载设置失败"),console.error("Failed to load advanced settings:",s)}finally{p.value=!1}}async function _(){if(!r.isConnected){m.warning("请先连接到 Aria2 服务器");return}f.value=!0;try{const s={"disk-cache":o.diskCache.toString()+"M","file-allocation":o.fileAllocation,"check-integrity":o.checkIntegrity?"true":"false","realtime-chunk-checksum":o.realtimeChunkChecksum?"true":"false","log-level":o.logLevel,"console-log-level":o.consoleLogLevel,checksum:o.checksumAlgorithm,"event-poll":o.eventPoll,"checksum-check":o.checksumCheck?"true":"false"};o.log&&(s.log=o.log),await r.changeGlobalOptions(s),m.success("设置保存成功")}catch(s){m.error("保存设置失败"),console.error("Failed to save advanced settings:",s)}finally{f.value=!1}}function w(){o.diskCache=16,o.fileAllocation="prealloc",o.checkIntegrity=!1,o.realtimeChunkChecksum=!0,o.logLevel="warn",o.log="",o.consoleLogLevel="notice",o.checksumAlgorithm="sha-1",o.eventPoll="epoll",o.checksumCheck=!0,m.info("已重置为默认值")}return(s,e)=>{const L=d("el-input-number"),u=d("el-form-item"),a=d("el-option"),c=d("el-select"),v=d("el-switch"),g=d("el-card"),x=d("el-input"),k=d("el-button"),S=d("el-space"),U=d("el-form"),I=R("loading");return V(),D("div",F,[e[27]||(e[27]=i("div",{class:"settings-header"},[i("h2",null,"高级设置"),i("p",{class:"settings-description"},"配置 Aria2 的高级参数和系统级选项")],-1)),E((V(),N(U,{ref_key:"formRef",ref:A,model:o,"label-width":"200px",style:{"max-width":"800px"}},{default:t(()=>[l(g,{class:"setting-group"},{header:t(()=>[...e[10]||(e[10]=[i("span",{class:"group-title"},"性能设置",-1)])]),default:t(()=>[l(u,{label:"磁盘缓存"},{default:t(()=>[l(L,{modelValue:o.diskCache,"onUpdate:modelValue":e[0]||(e[0]=n=>o.diskCache=n),min:0,max:1024,style:{width:"200px"}},null,8,["modelValue"]),e[11]||(e[11]=i("span",{style:{"margin-left":"8px"}},"MB",-1)),e[12]||(e[12]=i("div",{class:"form-tip"},"磁盘缓存大小，0 表示禁用",-1))]),_:1}),l(u,{label:"文件预分配"},{default:t(()=>[l(c,{modelValue:o.fileAllocation,"onUpdate:modelValue":e[1]||(e[1]=n=>o.fileAllocation=n),style:{width:"200px"}},{default:t(()=>[l(a,{label:"无",value:"none"}),l(a,{label:"预分配",value:"prealloc"}),l(a,{label:"回退",value:"falloc"})]),_:1},8,["modelValue"]),e[13]||(e[13]=i("div",{class:"form-tip"},"文件预分配方法",-1))]),_:1}),l(u,{label:"检查完整性"},{default:t(()=>[l(v,{modelValue:o.checkIntegrity,"onUpdate:modelValue":e[2]||(e[2]=n=>o.checkIntegrity=n)},null,8,["modelValue"]),e[14]||(e[14]=i("div",{class:"form-tip"},"下载完成后检查文件完整性",-1))]),_:1}),l(u,{label:"实时检查"},{default:t(()=>[l(v,{modelValue:o.realtimeChunkChecksum,"onUpdate:modelValue":e[3]||(e[3]=n=>o.realtimeChunkChecksum=n)},null,8,["modelValue"]),e[15]||(e[15]=i("div",{class:"form-tip"},"实时检查数据块校验和",-1))]),_:1})]),_:1}),l(g,{class:"setting-group"},{header:t(()=>[...e[16]||(e[16]=[i("span",{class:"group-title"},"日志设置",-1)])]),default:t(()=>[l(u,{label:"日志级别"},{default:t(()=>[l(c,{modelValue:o.logLevel,"onUpdate:modelValue":e[4]||(e[4]=n=>o.logLevel=n),style:{width:"200px"}},{default:t(()=>[l(a,{label:"调试",value:"debug"}),l(a,{label:"信息",value:"info"}),l(a,{label:"通知",value:"notice"}),l(a,{label:"警告",value:"warn"}),l(a,{label:"错误",value:"error"})]),_:1},8,["modelValue"]),e[17]||(e[17]=i("div",{class:"form-tip"},"日志记录级别",-1))]),_:1}),l(u,{label:"日志文件"},{default:t(()=>[l(x,{modelValue:o.log,"onUpdate:modelValue":e[5]||(e[5]=n=>o.log=n),placeholder:"日志文件路径"},null,8,["modelValue"]),e[18]||(e[18]=i("div",{class:"form-tip"},"日志文件保存路径",-1))]),_:1}),l(u,{label:"控制台日志级别"},{default:t(()=>[l(c,{modelValue:o.consoleLogLevel,"onUpdate:modelValue":e[6]||(e[6]=n=>o.consoleLogLevel=n),style:{width:"200px"}},{default:t(()=>[l(a,{label:"调试",value:"debug"}),l(a,{label:"信息",value:"info"}),l(a,{label:"通知",value:"notice"}),l(a,{label:"警告",value:"warn"}),l(a,{label:"错误",value:"error"})]),_:1},8,["modelValue"]),e[19]||(e[19]=i("div",{class:"form-tip"},"控制台日志级别",-1))]),_:1})]),_:1}),l(g,{class:"setting-group"},{header:t(()=>[...e[20]||(e[20]=[i("span",{class:"group-title"},"系统设置",-1)])]),default:t(()=>[l(u,{label:"摘要算法"},{default:t(()=>[l(c,{modelValue:o.checksumAlgorithm,"onUpdate:modelValue":e[7]||(e[7]=n=>o.checksumAlgorithm=n),style:{width:"200px"}},{default:t(()=>[l(a,{label:"SHA-1",value:"sha-1"}),l(a,{label:"SHA-224",value:"sha-224"}),l(a,{label:"SHA-256",value:"sha-256"}),l(a,{label:"SHA-384",value:"sha-384"}),l(a,{label:"SHA-512",value:"sha-512"}),l(a,{label:"MD5",value:"md5"}),l(a,{label:"ADLER32",value:"adler32"})]),_:1},8,["modelValue"]),e[21]||(e[21]=i("div",{class:"form-tip"},"文件校验摘要算法",-1))]),_:1}),l(u,{label:"事件轮询"},{default:t(()=>[l(c,{modelValue:o.eventPoll,"onUpdate:modelValue":e[8]||(e[8]=n=>o.eventPoll=n),style:{width:"200px"}},{default:t(()=>[l(a,{label:"epoll",value:"epoll"}),l(a,{label:"kqueue",value:"kqueue"}),l(a,{label:"port",value:"port"}),l(a,{label:"poll",value:"poll"}),l(a,{label:"select",value:"select"})]),_:1},8,["modelValue"]),e[22]||(e[22]=i("div",{class:"form-tip"},"事件轮询方法",-1))]),_:1}),l(u,{label:"摘要检查"},{default:t(()=>[l(v,{modelValue:o.checksumCheck,"onUpdate:modelValue":e[9]||(e[9]=n=>o.checksumCheck=n)},null,8,["modelValue"]),e[23]||(e[23]=i("div",{class:"form-tip"},"启用文件摘要检查",-1))]),_:1})]),_:1}),l(u,{style:{"margin-top":"24px"}},{default:t(()=>[l(S,null,{default:t(()=>[l(k,{type:"primary",onClick:_,disabled:!y(r).isConnected,loading:f.value},{default:t(()=>[...e[24]||(e[24]=[h(" 保存设置 ",-1)])]),_:1},8,["disabled","loading"]),l(k,{onClick:C,disabled:!y(r).isConnected},{default:t(()=>[...e[25]||(e[25]=[h(" 重新加载 ",-1)])]),_:1},8,["disabled"]),l(k,{onClick:w},{default:t(()=>[...e[26]||(e[26]=[h(" 重置为默认值 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[I,p.value]])])}}});const j=q(G,[["__scopeId","data-v-a0a4923e"]]);export{j as default};
